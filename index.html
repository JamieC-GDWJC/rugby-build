<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Unity Web Player | Mixtape Rugby</title>
  <style>
    body {
      overflow-y: hidden; /* Hide vertical scrollbar */
      overflow-x: hidden; /* Hide horizontal scrollbar */
      margin: 0;
      padding: 0;
      background-color: #00a085;
    }

    #unity-canvas {
      width: 100vw;
      height: 100vh;
      background: url('https://i.imgur.com/MYvbXpq.png') no-repeat top center;
      background-size: contain;
      display: block;
      position: fixed;
      top: 0;
      left: 0;
    }

    /* Style for the message when in landscape mode */
    #rotate-message {
      display: none;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.9); /* Semi-transparent background */
      color: white;
      font-size: 24px;
      z-index: 999; /* Ensure the message is above the canvas */
      text-align: center;
    }

    /* Show the message when in landscape mode */
    @media screen and (orientation: landscape) {
      #unity-canvas {
        display: flex;
      }
      #rotate-message {
        display: none;
      }
    }

    /* Hide the message when in portrait mode */
    
    @media screen and (orientation: portrait) {
      #rotate-message {
        display: none;
      }
      #unity-canvas {
        display: flex;
      }
    }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Listen for the TMP Input Field to be created
      const input = document.querySelector("input");

      if (input) {
        // Hide the input field when created
        input.style.position = "absolute"; // Move it out of view
        input.style.bottom = "-999px";     // Move it far off the screen
        input.style.opacity = 0;           // Make it invisible

        // Optionally, you can control its display behavior during typing
        input.addEventListener('focus', function() {
          input.style.opacity = 0;         // Keep it hidden while typing
        });

        input.addEventListener('blur', function() {
          input.style.opacity = 0;         // Hide again when the user stops typing
        });
      }
    });
  </script>

</head>

<body>

<!-- Unity Canvas -->
<canvas id="unity-canvas" tabindex="-1"></canvas>

<!-- Message that appears in landscape mode -->
<div id="rotate-message">
  Please rotate your device to portrait mode to play the game.
</div>

<script src="Build/006 brotli final.loader.js"></script>

<script>
  // Function to resize the canvas to fit the window
  function resizeCanvas() {
    var canvas = document.querySelector("#unity-canvas");
    canvas.style.width = window.innerWidth + 'px';
    canvas.style.height = window.innerHeight + 'px';
  }

  // Attach the resize event to update the canvas size when the window changes
  window.addEventListener('resize', resizeCanvas);
  window.addEventListener('orientationchange', resizeCanvas);

  // Trigger initial resize
  resizeCanvas();

  // Mobile device configuration
  if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
    var meta = document.createElement('meta');
    meta.name = 'viewport';
    meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
    document.getElementsByTagName('head')[0].appendChild(meta);
  }

  // Unity instance creation
  createUnityInstance(document.querySelector("#unity-canvas"), {
    arguments: [],
    dataUrl: "Build/006 brotli final.data.unityweb",
    frameworkUrl: "Build/006 brotli final.framework.js.unityweb",
    codeUrl: "Build/006 brotli final.wasm.unityweb",
    streamingAssetsUrl: "StreamingAssets",
    companyName: "Game Design with Jamie Clarke",
    productName: "Mixtape Rugby",
    productVersion: "0.2.0",
    matchWebGLToCanvasSize: true
  }).then((unityInstance) => {
    window.unityInstance = unityInstance;
  });

  // Function to lock the orientation to portrait if supported
  function lockOrientation() {
    if (screen.orientation && screen.orientation.lock) {
      screen.orientation.lock('portrait').catch(function (error) {
        console.log('Screen orientation lock not supported:', error);
      });
    }
  }

  // Attempt to lock the screen orientation to portrait on load
  lockOrientation();

</script>

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-analytics-compat.js"></script>

<script>
  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBlTWVT4eLZYEMzxZplxPhhcs7lCHHHWzk",
    authDomain: "rugby-mixtape.firebaseapp.com",
    databaseURL: "https://rugby-mixtape-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "rugby-mixtape",
    storageBucket: "rugby-mixtape.appspot.com",
    messagingSenderId: "497500005186",
    appId: "1:497500005186:web:92277550dd67ad95419edb",
    measurementId: "G-BR78E6SDJZ"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const analytics = firebase.analytics(app);
</script>

</body>
</html>
